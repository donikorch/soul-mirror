{% extends 'core/base.html' %}

{% block title %}–î–Ω–µ–≤–Ω–∏–∫–æ–≤–∞—è –∑–∞–ø–∏—Å—å - –ó–µ—Ä–∫–∞–ª–æ –î—É—à–∏{% endblock %}

{% block content %}
<div class="daily-entry-container">
    <h1>üìî –î–Ω–µ–≤–Ω–∏–∫ —Å–∞–º–æ–ø–æ–∑–Ω–∞–Ω–∏—è</h1>
    <p class="subtitle">–û–ø–∏—à–∏—Ç–µ —Å–æ–±—ã—Ç–∏–µ –¥–Ω—è –∏ —Å–≤–æ–∏ —ç–º–æ—Ü–∏–∏</p>

    <form method="post" class="entry-form">
        {% csrf_token %}

        <div class="form-group">
            <label for="event_description">–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ —Å–µ–≥–æ–¥–Ω—è?</label>
            <textarea
                id="event_description"
                name="event_description"
                rows="6"
                placeholder="–û–ø–∏—à–∏—Ç–µ —Å–æ–±—ã—Ç–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–≤–ª–∏—è–ª–æ –Ω–∞ –≤–∞—Å..."
                required
            ></textarea>
        </div>

        <div class="form-group">
            <label for="emotion_level">–£—Ä–æ–≤–µ–Ω—å —ç–º–æ—Ü–∏–∏ (1 - —Ö—É–¥—à–∞—è, 10 - –ª—É—á—à–∞—è)</label>
            <div class="emotion-slider">
                <input
                    type="range"
                    id="emotion_level"
                    name="emotion_level"
                    min="1"
                    max="10"
                    value="5"
                    step="1"
                >
                <div class="emotion-value">
                    <span id="emotion_value_display">5</span>/10
                </div>
            </div>
            <div class="emotion-labels">
                <span>üò¢ –ü–ª–æ—Ö–æ</span>
                <span>üòä –û—Ç–ª–∏—á–Ω–æ</span>
            </div>
        </div>

        <button type="submit" class="btn btn-primary btn-large" id="submitBtn">
            <span class="btn-text">–ü–æ–ª—É—á–∏—Ç—å —Å–æ–≤–µ—Ç –æ—Ç –∑–≤–µ–∑–¥</span>
            <span class="btn-loader" style="display: none;">
                <span class="spinner"></span> –û–±—Ä–∞—â–∞–µ–º—Å—è –∫ –∑–≤–µ–∑–¥–∞–º...
            </span>
        </button>
    </form>
</div>

<style>
.spinner {
    display: inline-block;
    width: 16px;
    height: 16px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-top-color: #fff;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin-right: 8px;
    vertical-align: middle;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.btn-loader {
    display: flex;
    align-items: center;
    justify-content: center;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const slider = document.getElementById('emotion_level');
    const display = document.getElementById('emotion_value_display');
    const form = document.querySelector('.entry-form');
    const submitBtn = document.getElementById('submitBtn');

    slider.addEventListener('input', function() {
        display.textContent = this.value;
    });

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã
    form.addEventListener('submit', function() {
        submitBtn.disabled = true;
        submitBtn.querySelector('.btn-text').style.display = 'none';
        submitBtn.querySelector('.btn-loader').style.display = 'flex';
    });
});
</script>
{% endblock %}
